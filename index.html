<!DOCTYPE html>
<html lang="en" dir="rtl">

<head>
    <meta charset="UTF-8">
    <title>سرورهای DNS</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/@fontsource/vazir/css.css" rel="stylesheet">
</head>

<body>
    <div class="container" id="app"></div>

    <script>
        // تابع دانلود کانفیگ
        function downloadConfig(serverId) {
            let downloadUrl = '';

            if (serverId === 'wireguard') {
                // لینک دانلود برای کانفیگ وایرگارد
                downloadUrl = 'https://udxnpcqectxkjinluloe.supabase.co/storage/v1/object/public/configs/style.css'; // لینک واقعی شما
            } else {
                // لینک برای سایر سرورها
                downloadUrl = 'https://udxnpcqectxkjinluloe.supabase.co/storage/v1/object/public/configs/style.css'; // لینک سرور 2 یا 3
            }

            // دانلود فایل
            window.open(downloadUrl, '_blank');
        }

        // داده‌های سرورها با اطلاعات DNS
        const servers = [
            {
                country: "آلمان",
                flag: "de",
                status: "active",
                bubbles: [
                    { size: 50, top: 10, left: 10 },
                    { size: 30, top: 30, left: 50 },
                    { size: 40, top: 70, left: 30 }
                ],
                dns: {
                    ipv4: ["185.149.213.148", "185.149.213.148"],
                    ipv6: ["2a02:c6a0:74cd::1", "2a02:c6a0:74cd::0"]
                }
            },
            {
                country: "هلند",
                flag: "nl",
                status: "active",
                bubbles: [
                    { size: 60, top: 20, left: 20 },
                    { size: 35, top: 40, left: 60 },
                    { size: 45, top: 80, left: 40 }
                ],
                dns: {
                    ipv4: ["145.125.185.206", "145.125.185.207"],
                    ipv6: ["2001:611:3b4d::1", "2001:611:3b4d::0"]
                }
            },
            {
                country: "سوئد",
                flag: "se",
                status: "active",
                bubbles: [
                    { size: 60, top: 20, left: 20 },
                    { size: 35, top: 40, left: 60 },
                    { size: 45, top: 80, left: 40 }
                ],
                dns: {
                    ipv4: ["185.57.168.87", "185.57.168.88"],
                    ipv6: ["2001:678:d5c:bb26::1", "2001:678:d5c:bb26::0"]
                }
            },
            {
                country: "الکترو",
                flag: "ir",
                status: "active",
                bubbles: [
                    { size: 60, top: 20, left: 20 },
                    { size: 35, top: 40, left: 60 },
                    { size: 45, top: 80, left: 40 }
                ],
                dns: {
                    ipv4: ["78.157.42.100", "78.157.42.101"],
                    ipv6: ["-------", "-------"]
                }
            },
            {
                country: "رادار",
                flag: "ir",
                status: "active",
                bubbles: [
                    { size: 60, top: 20, left: 20 },
                    { size: 35, top: 40, left: 60 },
                    { size: 45, top: 80, left: 40 }
                ],
                dns: {
                    ipv4: ["10.202.10.10", "10.202.10.11"],
                    ipv6: ["-------", "-------"]
                }
            }
        ];

        // کامپوننت کپی آیفون
        const copyIcon = `
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/>
            </svg>
        `;

        // کارت وایرگارد
        const generateWireguardCard = () => `
            <div class="card wireguard-card">
                <h3>کانفیگ وایرگارد</h3>
                
                <!-- انتخاب سرور -->
                <div class="server-select">
                    <label for="server-wireguard">انتخاب سرور:</label>
                    <select id="server-wireguard">
                        <option value="server1">سرور 1</option>
                        <option value="server2">سرور 2</option>
                        <option value="server3">سرور 3</option>
                    </select>
                </div>

                <!-- دکمه دانلود -->
                <button class="download-btn" onclick="downloadConfig('wireguard')">دانلود کانفیگ</button>
            </div>
        `;

        // کارت سرورهای دیگر
        const generateCard = (server) => `
            <div class="card">
                <div class="bubble-bg">
                    ${server.bubbles.map(b => `
                        <div class="bubble" style="
                            width: ${b.size}px;
                            height: ${b.size}px;
                            top: ${b.top}%;
                            left: ${b.left}%;
                        "></div>
                    `).join('')}
                </div>
                <div class="card-header">
                    <div class="location-info">
                        <div class="flag">
                            <img src="https://flagcdn.com/w20/${server.flag}.png" alt="${server.country}">
                        </div>
                        <span>${server.country}</span>
                    </div>
                    <div class="status-info">
                        <div class="status-badge ${server.status}">
                            <div class="status-indicator"></div>
                            ${server.status === 'active' ? 'فعال' : 'غیرفعال'}
                        </div>
                    </div>
                </div>
                
                <!-- بخش DNS IPv4 و IPv6 -->
                <div class="dns-group">
                    <div class="dns-title">DNS IPv4</div>
                    <div class="dns-list">
                        ${server.dns.ipv4.map(ip => `
                            <div class="dns-item">
                                <span class="dns-address">${ip}</span>
                                <button class="copy-btn">${copyIcon}</button>
                                <span class="tooltip">کپی شد!</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
                <div class="dns-group">
                    <div class="dns-title">DNS IPv6</div>
                    <div class="dns-list">
                        ${server.dns.ipv6.map(ip => `
                            <div class="dns-item">
                                <span class="dns-address">${ip}</span>
                                <button class="copy-btn">${copyIcon}</button>
                                <span class="tooltip">کپی شد!</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>
        `;
        // رندر کارت‌ها
        document.getElementById('app').innerHTML = `
            <div class="container">
                ${generateWireguardCard()}
                ${servers.map(server => generateCard(server)).join('')}
            </div>
        `;

        // کپی کردن آدرس‌ها
        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', async function () {
                const dnsAddress = this.previousElementSibling.textContent;
                const tooltip = this.nextElementSibling;

                try {
                    await navigator.clipboard.writeText(dnsAddress);

                    // نمایش تایید کپی
                    tooltip.style.opacity = '1';
                    setTimeout(() => {
                        tooltip.style.opacity = '0';
                    }, 2000);

                    // تغییر آیکون به تیک سبز
                    this.innerHTML = `
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                    `;
                    this.classList.add('success');
                    setTimeout(() => {
                        this.innerHTML = `
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"/>
                            </svg>
                        `;
                        this.classList.remove('success');
                    }, 3000);
                } catch (error) {
                    console.error("خطا در کپی کردن:", error);
                }
            });
        });
    </script>
</body>

</html>
